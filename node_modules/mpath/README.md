#mpath

{G,S}et javascript object values using MongoDB-like path notation.

###Getting

```js
var mpath = require('mpath');

var obj = {
    comments: [
      { title: 'funny' },
      { title: 'exciting!' }
    ]
}

mpath.get('comments.1.title', obj) // 'exciting!'
```

`mpath.get` supports array property notation as well.

```js
var obj = {
    comments: [
      { title: 'funny' },
      { title: 'exciting!' }
    ]
}

mpath.get('comments.title', obj) // ['funny', 'exciting!']
```

Array property and indexing syntax, when used together, are very powerful.

```js
var obj = {
  array: [
      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}
    , { o: { array: [{x: {b: [1,2,3]}}, { x: {z: 10 }}, { x: 'Turkey Day' }] }}
    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}
    , { o: { array: [{x: null }] }}
    , { o: { array: [{y: 3 }] }}
    , { o: { array: [3, 0, null] }}
    , { o: { name: 'ha' }}
  ];
}

var found = mpath.get('array.o.array.x.b.1', obj);

console.log(found); // prints..

    [ [6, undefined]
    , [2, undefined, undefined]
    , [null, 1]
    , [null]
    , [undefined]
    , [undefined, undefined, undefined]
    , undefined
    ]

```

#####Field selection rules:

The following rules are iteratively applied to each `segment` in the passed `path`. For example:

```js
var path = 'one.two.14'; // path
'one' // segment 0
'two' // segment 1
14    // segment 2
```

- 1) when value of the segment parent is not an array, return the value of `parent.segment`
- 2) when value of the segment parent is an array
  - a) if the segment is an integer, replace the parent array with the value at `parent[segment]`
  - b) if not an integer, keep the array but replace each array `item` with the value returned from calling `get(remainingSegments, item)` or undefined if falsey.

#####Maps

`mpath.get` also accepts an optional `map` argument which receives each individual found value. The value returned from the `map` function will be used in the original found values place.

```js
var obj = {
    comments: [
      { title: 'funny' },
      { title: 'exciting!' }
    ]
}

mpath.get('comments.title', obj, function (val) {
  return 'funny' == val
    ? 'amusing'
    : val;
});
// ['amusing', 'exciting!']
```

###Setting

```js
var obj = {
    comments: [
      { title: 'funny' },
      { title: 'exciting!' }
    ]
}

mpath.set('comments.1.title', 'hilarious', obj)
console.log(obj.comments[1].title) // 'hilarious'
```

`mpath.set` supports the same array property notation as `mpath.get`.

```js
var obj = {
    comments: [
      { title: 'funny' },
      { title: 'exciting!' }
    ]
}

mpath.set('comments.title', ['hilarious', 'fruity'], obj);

console.log(obj); // prints..

  { comments: [
      { title: 'hilarious' },
      { title: 'fruity' }
  ]}
```

Array property and indexing syntax can be used together also when setting.

```js
var obj = {
  array: [
      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}
    , { o: { array: [{x: {b: [1,2,3]}}, { x: {z: 10 }}, { x: 'Turkey Day' }] }}
    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}
    , { o: { array: [{x: null }] }}
    , { o: { array: [{y: 3 }] }}
    , { o: { array: [3, 0, null] }}
    , { o: { name: 'ha' }}
  ]
}

mpath.set('array.1.o', 'this was changed', obj);

console.log(require('util').inspect(obj, false, 1000)); // prints..

{
  array: [
      { o: { array: [{x: {b: [4,6,8]}}, { y: 10} ] }}
    , { o: 'this was changed' }
    , { o: { array: [{x: {b: null }}, { x: { b: [null, 1]}}] }}
    , { o: { array: [{x: null }] }}
    , { o: { array: [{y: 3 }] }}
    , { o: { array: [3, 0, null] }}
    , { o: { name: 'ha' }}
  ];
}

mpath.set('array.o.array.x', 'this was changed too', obj);

console.log(require('util').inspect(obj, false, 1000)); // prints..

{
  array: [
      { o: { array: [{x: 'this was changed too'}, { y: 10, x: 'this was changed too'} ] }}
    , { o: 'this was changed' }
    , { o: { array: [{x: 'this was changed too'}, { x: 'this was changed too'}] }}
    , { o: { array: [{x: 'this was changed too'}] }}
    , { o: { array: [{x: 'this was changed too', y: 3 }] }}
    , { o: { array: [3, 0, null] }}
    , { o: { name: 'ha' }}
  ];
}
```

####Setting arrays

By default, setting a property 